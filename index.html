<!doctype html>
<html lang="en">
  <head>
    <title>MindAR + Model Viewer Marker Örneği</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.jsdelivr.net/npm/mind-ar/dist/mindar-image.prod.js"></script>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
    <style>
      body, html { margin: 0; overflow: hidden; }
      model-viewer { width: 100vw; height: 100vh; display: none; }
      mindar-image { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; }
    </style>
  </head>
  <body>
    <mindar-image
      id="mindar"
      src="qrcode.mind"
      autoplay="true"
      color-space="sRGB"
      image-targets="qrcode.mind"
    >
      <!-- Marker üzeri model -->
      <model-viewer
        id="modelViewer"
        slot="content"
        src="model.glb"
        camera-controls
        ar
        ar-modes="webxr scene-viewer quick-look"
        style="width: 300px; height: 300px;"
      ></model-viewer>
    </mindar-image>

    <script>
      const mindar = document.querySelector("#mindar");
      const modelViewer = document.querySelector("#modelViewer");

      // Marker bulunduğunda modeli göster
      mindar.addEventListener("targetFound", () => {
        modelViewer.style.display = "block";
        console.log("Marker bulundu, model gösteriliyor.");
      });

      // Marker kaybolduğunda modeli gizle
      mindar.addEventListener("targetLost", () => {
        modelViewer.style.display = "none";
        console.log("Marker kayboldu, model gizleniyor.");
      });

      // MindAR başlat
      mindar.start();
    </script>
  </body>
</html>
